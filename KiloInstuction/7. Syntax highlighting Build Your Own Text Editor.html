<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>7. Syntax highlighting | Build Your Own Text Editor</title>
    <link href="7.%20Syntax%20highlighting%20Build%20Your%20Own%20Text%20Editor_files/style.css" rel="stylesheet">
  <style id="zoomLevel-styles"></style></head>
  <body style="font-size: 18px !important; line-height: 25.2px !important;" data-new-gr-c-s-check-loaded="8.906.0" data-gr-ext-installed="">
    <header class="bar" style="font-size: 18px !important; line-height: 25.2px !important;">
      <nav style="font-size: 18px !important; line-height: 25.2px !important;">
        <a href="https://viewsourcecode.org/snaptoken/kilo/06.search.html" style="font-size: 18px !important; line-height: 25.2px !important;">← prev</a>
        <a href="https://viewsourcecode.org/snaptoken/kilo/index.html" style="font-size: 18px !important; line-height: 25.2px !important;">contents</a>
        <a href="https://viewsourcecode.org/snaptoken/kilo/08.appendices.html" style="font-size: 18px !important; line-height: 25.2px !important;">next →</a>
      </nav>
    </header>
    <div id="container" style="font-size: 18px !important; line-height: 25.2px !important;">
      <h1 id="syntax-highlighting" style="font-size: 38px !important; line-height: 38px !important;">Syntax highlighting</h1>
<h2 id="colorful-digits" style="font-size: 26px !important; line-height: 26px !important;"><a href="#colorful-digits" style="font-size: 26px !important; line-height: 26px !important;">Colorful digits</a></h2>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Let’s start by just getting some color on the screen, as simply as possible.
We’ll attempt to highlight numbers by coloring each digit character
<span style="color: red; font-size: 18px !important; line-height: 25.2px !important;">red</span>.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/syntax-digits/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 142</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/syntax-digits" style="font-size: 12px !important; line-height: 25.2px !important;">syntax-digits</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorScroll</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawRows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rowoff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">/</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">80</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">snprintf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">),</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"Kilo editor -- version %s"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">KILO_VERSION</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">/</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"~"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">" "</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"~"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[31m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">5</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[39m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">5</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[K"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\r\n</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawStatusBar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawMessageBar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRefreshScreen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSetStatusMessage</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">const</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fmt</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">...)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">We can no longer just feed the substring of <code style="font-size: 18px !important; line-height: 25.2px !important;">render</code> that we want to print
right into <code style="font-size: 18px !important; line-height: 25.2px !important;">abAppend()</code>. We’ll have to do it character-by-character from now
on. So we loop through the characters and use <code style="font-size: 18px !important; line-height: 25.2px !important;">isdigit()</code> on each one to test
if it is a digit character. If it is, we precede it with the <code style="font-size: 18px !important; line-height: 25.2px !important;">&lt;esc&gt;[31m</code> escape
sequence and follow it by the <code style="font-size: 18px !important; line-height: 25.2px !important;">&lt;esc&gt;[39m</code> sequence.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">We previously used the <code style="font-size: 18px !important; line-height: 25.2px !important;">m</code> command
(<a href="http://vt100.net/docs/vt100-ug/chapter3.html#SGR" style="font-size: 18px !important; line-height: 25.2px !important;">Select Graphic Rendition</a>)
to draw the status bar using inverted colors. Now we are using it to set the
text color. The
<a href="http://vt100.net/docs/vt100-ug/chapter3.html" style="font-size: 18px !important; line-height: 25.2px !important;">VT100 User Guide</a> doesn’t
document color, so let’s turn to the Wikipedia article on
<a href="https://en.wikipedia.org/wiki/ANSI_escape_code" style="font-size: 18px !important; line-height: 25.2px !important;">ANSI escape codes</a>. It
includes a large table containing all the different argument codes you can use
with the <code style="font-size: 18px !important; line-height: 25.2px !important;">m</code> command on various terminals. It also includes the ANSI color
table with the 8 foreground/background colors available.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">The first table says we can set the text color using codes <code style="font-size: 18px !important; line-height: 25.2px !important;">30</code> to <code style="font-size: 18px !important; line-height: 25.2px !important;">37</code>, and
reset it to the default color using <code style="font-size: 18px !important; line-height: 25.2px !important;">39</code>. The color table says <code style="font-size: 18px !important; line-height: 25.2px !important;">0</code> is black,
<code style="font-size: 18px !important; line-height: 25.2px !important;">1</code> is red, and so on, up to <code style="font-size: 18px !important; line-height: 25.2px !important;">7</code> which is white. Putting these together, we can
set the text color to red using <code style="font-size: 18px !important; line-height: 25.2px !important;">31</code> as an argument to the <code style="font-size: 18px !important; line-height: 25.2px !important;">m</code> command. After
printing the digit, we use <code style="font-size: 18px !important; line-height: 25.2px !important;">39</code> as an argument to <code style="font-size: 18px !important; line-height: 25.2px !important;">m</code> to set the text color
back to normal.</p>
<h2 id="refactor-syntax-highlighting" style="font-size: 26px !important; line-height: 26px !important;"><a href="#refactor-syntax-highlighting" style="font-size: 26px !important; line-height: 26px !important;">Refactor syntax highlighting</a></h2>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now we know how to color text, but we’re going to have to do a lot more work to
actually highlight entire strings, keywords, comments, and so on. We can’t just
decide what color to use based on the class of each character, like we’re doing
with digits currently. What we want to do is figure out the highlighting for
each row of text before we display it, and then rehighlight a line whenever it
gets changed. To do that, we need to store the highlighting of each line in an
array. Let’s add an array to the <code style="font-size: 18px !important; line-height: 25.2px !important;">erow</code> struct named <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code>, which stands for
“highlight”.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/syntax-refactoring/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 143</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/syntax-refactoring" style="font-size: 12px !important; line-height: 25.2px !important;">syntax-refactoring</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">typedef</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">size</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowCxToRx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">cx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowRxToCx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorInsertRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">size_t</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">));</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memmove</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">));</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">size</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">malloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memcpy</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\0'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">dirty</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorFreeRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">free</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">free</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">free</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDelRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowInsertChar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowAppendString</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">size_t</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowDelChar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code> is an array of <code style="font-size: 18px !important; line-height: 25.2px !important;">unsigned char</code> values, meaning integers in the range of
<code style="font-size: 18px !important; line-height: 25.2px !important;">0</code> to <code style="font-size: 18px !important; line-height: 25.2px !important;">255</code>. Each value in the array will correspond to a character in
<code style="font-size: 18px !important; line-height: 25.2px !important;">render</code>, and will tell you whether that character is part of a string, or a
comment, or a number, and so on. Let’s create an <code style="font-size: 18px !important; line-height: 25.2px !important;">enum</code> containing the possible
values that the <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code> array can contain.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/highlight-enum/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 144</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/highlight-enum" style="font-size: 12px !important; line-height: 25.2px !important;">highlight-enum</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_VERSION "0.0.1"</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_TAB_STOP 8</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_QUIT_TIMES 3</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define CTRL_KEY(k) ((k) &amp; 0x1f)</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorKey</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorHighlight</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">For now, we’ll focus on highlighting numbers only. So we want every character
that’s part of a number to have a corresponding <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NUMBER</code> value in the <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code>
array, and we want every other value in <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code> to be <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NORMAL</code>.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Let’s create a new <code style="font-size: 18px !important; line-height: 25.2px !important;">/*** syntax highlighting ***/</code> section, and create an
<code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code> function in it. This function will go through the
characters of an <code style="font-size: 18px !important; line-height: 25.2px !important;">erow</code> and highlight them by setting each value in the <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code>
array.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/editor-update-syntax/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 145</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/editor-update-syntax" style="font-size: 12px !important; line-height: 25.2px !important;">editor-update-syntax</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">die</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">const</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">disableRawMode</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">enableRawMode</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorReadKey</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">getCursorPosition</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">cols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">getWindowSize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">cols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></ins><ins class="line" style="font-size: 14px !important;"></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important;"></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 18px !important; line-height: 25.2px !important;">memset()</code> comes from <code style="font-size: 18px !important; line-height: 25.2px !important;">&lt;string.h&gt;</code>.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">First we <code style="font-size: 18px !important; line-height: 25.2px !important;">realloc()</code> the needed memory, since this might be a new row or the
row might be bigger than the last time we highlighted it. Notice that the size
of the <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code> array is the same as the <code style="font-size: 18px !important; line-height: 25.2px !important;">render</code> array, so we use <code style="font-size: 18px !important; line-height: 25.2px !important;">rsize</code> as the
amount of memory to allocate for <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code>.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Then we use <code style="font-size: 18px !important; line-height: 25.2px !important;">memset()</code> to set all characters to <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NORMAL</code> by default, before
looping through the characters and setting the digits to <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NUMBER</code>. (Don’t
worry, we’ll implement a better way of recognizing numbers soon enough, but
right now we are focusing on refactoring.)</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now let’s actually call <code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code>.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/call-update-syntax/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 146</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/call-update-syntax" style="font-size: 12px !important; line-height: 25.2px !important;">call-update-syntax</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowCxToRx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">cx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowRxToCx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">tabs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">size</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\t'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">tabs</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">free</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">malloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">size</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">tabs</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">KILO_TAB_STOP</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">size</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\t'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">' '</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">%</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">KILO_TAB_STOP</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">' '</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\0'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorInsertRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">size_t</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorFreeRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDelRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowInsertChar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowAppendString</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">size_t</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowDelChar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateRow()</code> already has the job of updating the <code style="font-size: 18px !important; line-height: 25.2px !important;">render</code> array whenever
the text of the row changes, so it makes sense that that’s where we want to
update the <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code> array. So after updating <code style="font-size: 18px !important; line-height: 25.2px !important;">render</code>, we call
<code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code> at the end.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Next, let’s make an <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntaxToColor()</code> function that maps values in <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code>
to the actual ANSI color codes we want to draw them with.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/map-colors/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 147</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/map-colors" style="font-size: 12px !important; line-height: 25.2px !important;">map-colors</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">switch</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">31</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="nl" style="font-size: 14px !important; line-height: 20px !important;">default:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">37</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">We return the ANSI code for “foreground red” for numbers, and “foreground
white” for anything else that might slip through. (We’ll be handling
<code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NORMAL</code> separately, so <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntaxToColor()</code> doesn’t need to handle it.)</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now let’s finally draw the highlighted text to the screen!</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/use-hl/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 148</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/use-hl" style="font-size: 12px !important; line-height: 25.2px !important;">use-hl</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorScroll</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawRows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rowoff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">/</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">80</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">snprintf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">),</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"Kilo editor -- version %s"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">KILO_VERSION</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">/</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"~"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">" "</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"~"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[39m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">5</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">16</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">clen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">snprintf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">),</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[%dm"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">clen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[39m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">5</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[K"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\r\n</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorDrawStatusBar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorDrawMessageBar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorRefreshScreen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSetStatusMessage</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">const</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fmt</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">...)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">First we get a pointer, <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code>, to the slice of the <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code> array that corresponds
to the slice of <code style="font-size: 18px !important; line-height: 25.2px !important;">render</code> that we are printing. Then, for each character, if
it’s an <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NORMAL</code> character, we use <code style="font-size: 18px !important; line-height: 25.2px !important;">&lt;esc&gt;[39m</code> to make sure we’re using the
default text color before printing it. If it’s not <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NORMAL</code>, we use
<code style="font-size: 18px !important; line-height: 25.2px !important;">snprintf()</code> to write the escape sequence into a buffer which we pass to
<code style="font-size: 18px !important; line-height: 25.2px !important;">abAppend()</code> before appending the actual character. Finally, after we’re done
looping through all the characters and displaying them, we print a final
<code style="font-size: 18px !important; line-height: 25.2px !important;">&lt;esc&gt;[39m</code> escape sequence to make sure the text color is reset to default.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">This works, but do we really have to write out an escape sequence before every
single character? In practice, most characters are going to be the same color
as the previous character, so most of the escape sequences are redundant. Let’s
keep track of the current text color as we loop through the characters, and
only print out an escape sequence when the color changes.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/current-color/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 149</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/current-color" style="font-size: 12px !important; line-height: 25.2px !important;">current-color</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorScroll</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawRows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rowoff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">/</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">80</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">snprintf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">),</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"Kilo editor -- version %s"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">KILO_VERSION</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">/</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"~"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">" "</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"~"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[39m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">5</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">16</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">clen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">snprintf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">),</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[%dm"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">clen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[39m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">5</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[K"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\r\n</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawStatusBar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawMessageBar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRefreshScreen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSetStatusMessage</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">const</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fmt</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">...)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 18px !important; line-height: 25.2px !important;">current_color</code> is <code style="font-size: 18px !important; line-height: 25.2px !important;">-1</code> when we want the default text color, otherwise it is
set to the value that <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntaxToColor()</code> last returned. When the color
changes, we print out the escape sequence for that color and set
<code style="font-size: 18px !important; line-height: 25.2px !important;">current_color</code> to the new color. When we go from highlighted text back to
<code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NORMAL</code> text, we print out the <code style="font-size: 18px !important; line-height: 25.2px !important;">&lt;esc&gt;[39m</code> escape sequence and set
<code style="font-size: 18px !important; line-height: 25.2px !important;">current_color</code> to <code style="font-size: 18px !important; line-height: 25.2px !important;">-1</code>.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">That concludes our refactoring of the syntax highlighting system.</p>
<h2 id="colorful-search-results" style="font-size: 26px !important; line-height: 26px !important;"><a href="#colorful-search-results" style="font-size: 26px !important; line-height: 26px !important;">Colorful search results</a></h2>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Before we start highlighting strings and keywords and all that, let’s use our
highlighting system to highlight search results. We’ll start by adding
<code style="font-size: 18px !important; line-height: 25.2px !important;">HL_MATCH</code> to the <code style="font-size: 18px !important; line-height: 25.2px !important;">editorHighlight</code> enum, and mapping it to the color blue
(<code style="font-size: 18px !important; line-height: 25.2px !important;">34</code>) in <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntaxToColor()</code>.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/hl-match/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 150</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/hl-match" style="font-size: 12px !important; line-height: 25.2px !important;">hl-match</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_VERSION "0.0.1"</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_TAB_STOP 8</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_QUIT_TIMES 3</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define CTRL_KEY(k) ((k) &amp; 0x1f)</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorKey</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorHighlight</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MATCH</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">switch</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">31</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MATCH</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">34</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="nl" style="font-size: 14px !important; line-height: 20px !important;">default:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">37</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">Now all we have to do is <code style="font-size: 18px !important; line-height: 25.2px !important;">memset()</code> the matched substring to <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_MATCH</code> in our
search code.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/search-highlighting/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 151</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/search-highlighting" style="font-size: 12px !important; line-height: 25.2px !important;">search-highlighting</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorFindCallback</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">query</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">static</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">last_match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">static</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\r'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\x1b'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">last_match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">ARROW_RIGHT</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">ARROW_DOWN</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">ARROW_LEFT</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">ARROW_UP</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">last_match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">last_match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">last_match</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strstr</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">query</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">match</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">last_match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">cy</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">cx</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorRowRxToCx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rowoff</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MATCH</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">query</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">));</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorFind</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 18px !important; line-height: 25.2px !important;">match - row-&gt;render</code> is the index into <code style="font-size: 18px !important; line-height: 25.2px !important;">render</code> of the match, so we use that
as our index into <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code>.</p>
<h2 id="restore-syntax-highlighting-after-search" style="font-size: 26px !important; line-height: 26px !important;"><a href="#restore-syntax-highlighting-after-search" style="font-size: 26px !important; line-height: 26px !important;">Restore syntax highlighting after search</a></h2>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Currently, search results stay highlighted in blue even after the user is done
using the search feature. We want to restore <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code> to its previous value after
each search. To do that, we’ll save the original contents of <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code> in a static
variable named <code style="font-size: 18px !important; line-height: 25.2px !important;">saved_hl</code> in <code style="font-size: 18px !important; line-height: 25.2px !important;">editorFindCallback()</code>, and restore <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code> to the
contents of <code style="font-size: 18px !important; line-height: 25.2px !important;">saved_hl</code> at the top of the callback.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/restore-hl/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 152</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/restore-hl" style="font-size: 12px !important; line-height: 25.2px !important;">restore-hl</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorFindCallback</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">query</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">static</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">last_match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">static</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">static</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">saved_hl_line</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">static</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">saved_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important;"></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">saved_hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memcpy</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">saved_hl_line</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">saved_hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">saved_hl_line</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">free</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">saved_hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">saved_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\r'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\x1b'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">last_match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">ARROW_RIGHT</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">ARROW_DOWN</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">ARROW_LEFT</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">key</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">ARROW_UP</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">last_match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">last_match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">last_match</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">direction</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strstr</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">query</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">match</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">last_match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">cy</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">cx</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorRowRxToCx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rowoff</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">saved_hl_line</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">saved_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">malloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memcpy</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">saved_hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">match</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MATCH</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">query</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">));</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorFind</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">We use another static variable named <code style="font-size: 18px !important; line-height: 25.2px !important;">saved_hl_line</code> to know which line’s <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code>
needs to be restored. <code style="font-size: 18px !important; line-height: 25.2px !important;">saved_hl</code> is a dynamically allocated array which points
to <code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code> when there is nothing to restore. If there is something to restore,
we <code style="font-size: 18px !important; line-height: 25.2px !important;">memcpy()</code> it to the saved line’s <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code> and then deallocate <code style="font-size: 18px !important; line-height: 25.2px !important;">saved_hl</code> and
set it back to <code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code>.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Notice that the <code style="font-size: 18px !important; line-height: 25.2px !important;">malloc()</code>’d memory is guaranteed to be <code style="font-size: 18px !important; line-height: 25.2px !important;">free()</code>’d, because
when the user closes the search prompt by pressing <kbd style="font-size: 14px !important; line-height: 25.2px !important;">Enter</kbd> or
<kbd style="font-size: 14px !important; line-height: 25.2px !important;">Escape</kbd>, <code style="font-size: 18px !important; line-height: 25.2px !important;">editorPrompt()</code> calls our callback, giving a chance for
<code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code> to be restored before <code style="font-size: 18px !important; line-height: 25.2px !important;">editorPrompt()</code> finally returns. Also notice that
it’s impossible for <code style="font-size: 18px !important; line-height: 25.2px !important;">saved_hl</code> to get <code style="font-size: 18px !important; line-height: 25.2px !important;">malloc()</code>’d before its old value gets
<code style="font-size: 18px !important; line-height: 25.2px !important;">free()</code>’d, because we always <code style="font-size: 18px !important; line-height: 25.2px !important;">free()</code> it at the top of the function. And
finally, it’s impossible for the user to edit the file between saving and
restoring the <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code>, so we can safely use <code style="font-size: 18px !important; line-height: 25.2px !important;">saved_hl_line</code> as an index into
<code style="font-size: 18px !important; line-height: 25.2px !important;">E.row</code>. (It’s important to think about these things.)</p>
<h2 id="colorful-numbers" style="font-size: 26px !important; line-height: 26px !important;"><a href="#colorful-numbers" style="font-size: 26px !important; line-height: 26px !important;">Colorful numbers</a></h2>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Alright, let’s start working on highlighting numbers properly. First, we’ll
change our <code style="font-size: 18px !important; line-height: 25.2px !important;">for</code> loop in <code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code> to a <code style="font-size: 18px !important; line-height: 25.2px !important;">while</code> loop, to allow us
to consume multiple characters each iteration. (We’ll only consume one
character at a time for numbers, but this will be useful for later.)</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/syntax-while/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 153</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/syntax-while" style="font-size: 12px !important; line-height: 25.2px !important;">syntax-while</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></ins><ins class="line" style="font-size: 14px !important;"></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">Now let’s define an <code style="font-size: 18px !important; line-height: 25.2px !important;">is_separator()</code> function that takes a character and
returns true if it’s considered a separator character.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/is-separator/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 154</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/is-separator" style="font-size: 12px !important; line-height: 25.2px !important;">is-separator</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">isspace</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\0'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strchr</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">",.()+-/*=~%&lt;&gt;[];"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 18px !important; line-height: 25.2px !important;">strchr()</code> comes from <code style="font-size: 18px !important; line-height: 25.2px !important;">&lt;string.h&gt;</code>. It looks for the first occurrence of a
character in a string, and returns a pointer to the matching character in the
string. If the string doesn’t contain the character, <code style="font-size: 18px !important; line-height: 25.2px !important;">strchr()</code> returns <code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code>.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Right now, numbers are highlighted even if they’re part of an identifier, such
as the <code style="font-size: 18px !important; line-height: 25.2px !important;">32</code> in <code style="font-size: 18px !important; line-height: 25.2px !important;">int32_t</code>. To fix that, we’ll require that numbers are preceded
by a separator character, which includes whitespace or punctuation characters.
We also include the null byte (<code style="font-size: 18px !important; line-height: 25.2px !important;">'\0'</code>), because then we can count the null byte
at the end of each line as a separator, which will make some of our code
simpler in the future.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Let’s add a <code style="font-size: 18px !important; line-height: 25.2px !important;">prev_sep</code> variable to <code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code> that keeps track of
whether the previous character was a separator. Then let’s use it to recognize
and highlight numbers properly.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/prev-sep/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 155</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/prev-sep" style="font-size: 12px !important; line-height: 25.2px !important;">prev-sep</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">We initialize <code style="font-size: 18px !important; line-height: 25.2px !important;">prev_sep</code> to <code style="font-size: 18px !important; line-height: 25.2px !important;">1</code> (meaning true) because we consider the
beginning of the line to be a separator. (Otherwise numbers at the very
beginning of the line wouldn’t be highlighted.)</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 18px !important; line-height: 25.2px !important;">prev_hl</code> is set to the highlight type of the previous character. To highlight
a digit with <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NUMBER</code>, we now require the previous character to either be a
separator, or to also be highlighted with <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NUMBER</code>.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">When we decide to highlight the current character a certain way (<code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NUMBER</code> in
this case), we increment <code style="font-size: 18px !important; line-height: 25.2px !important;">i</code> to “consume” that character, set <code style="font-size: 18px !important; line-height: 25.2px !important;">prev_sep</code> to <code style="font-size: 18px !important; line-height: 25.2px !important;">0</code>
to indicate we are in the middle of highlighting something, and then <code style="font-size: 18px !important; line-height: 25.2px !important;">continue</code>
the loop. We will use this pattern for each thing that we highlight.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">If we end up not highlighting the current character, then we’ll end up at the
bottom of the <code style="font-size: 18px !important; line-height: 25.2px !important;">while</code> loop, where we set <code style="font-size: 18px !important; line-height: 25.2px !important;">prev_sep</code> according to whether the
current character is a separator, and we increment <code style="font-size: 18px !important; line-height: 25.2px !important;">i</code> to consume the
character. The <code style="font-size: 18px !important; line-height: 25.2px !important;">memset()</code> we did at the top of the function means that an
unhighlighted character will have a value of <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NORMAL</code> in <code style="font-size: 18px !important; line-height: 25.2px !important;">hl</code>.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now let’s support highlighting numbers that contain decimal points.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/decimal-point/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 156</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/decimal-point" style="font-size: 12px !important; line-height: 25.2px !important;">decimal-point</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">A <code style="font-size: 18px !important; line-height: 25.2px !important;">.</code> character that comes after a character that we just highlighted as a
number will now be considered part of the number.</p>
<h2 id="detect-filetype" style="font-size: 26px !important; line-height: 26px !important;"><a href="#detect-filetype" style="font-size: 26px !important; line-height: 26px !important;">Detect filetype</a></h2>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Before we go on to highlight other things, we’re going to add filetype
detection to our editor. This will allow us to have different rules for how to
highlight different types of files. For example, text files shouldn’t have any
highlighting, and C files should highlight numbers, strings, C/C++-style
comments, and many different keywords specific to C.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Let’s create an <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntax</code> struct that will contain all the syntax
highlighting information for a particular filetype.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/editor-syntax/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 157</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/editor-syntax" style="font-size: 12px !important; line-height: 25.2px !important;">editor-syntax</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_VERSION "0.0.1"</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_TAB_STOP 8</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_QUIT_TIMES 3</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define CTRL_KEY(k) ((k) &amp; 0x1f)</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorKey</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorHighlight</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HL_HIGHLIGHT_NUMBERS (1&lt;&lt;0)</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filetype</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">**</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filematch</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">typedef</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">The <code style="font-size: 18px !important; line-height: 25.2px !important;">filetype</code> field is the name of the filetype that will be displayed to the
user in the status bar. <code style="font-size: 18px !important; line-height: 25.2px !important;">filematch</code> is an array of strings, where each string
contains a pattern to match a filename against. If the filename matches, then
the file will be recognized as having that filetype. Finally, <code style="font-size: 18px !important; line-height: 25.2px !important;">flags</code> is a bit
field that will contain flags for whether to highlight numbers and whether to
highlight strings for that filetype. For now, we define just the
<code style="font-size: 18px !important; line-height: 25.2px !important;">HL_HIGHLIGHT_NUMBERS</code> flag bit.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now let’s make an array of built-in <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntax</code> structs, and add one for the
C language to it.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/hldb/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 158</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/hldb" style="font-size: 12px !important; line-height: 25.2px !important;">hldb</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">typedef</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></ins><ins class="line" style="font-size: 14px !important;"></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_extensions</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".c"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".h"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".cpp"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></ins><ins class="line" style="font-size: 14px !important;"></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HLDB</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"c"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_extensions</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">},</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></ins><ins class="line" style="font-size: 14px !important;"></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HLDB_ENTRIES (sizeof(HLDB) / sizeof(HLDB[0]))</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 18px !important; line-height: 25.2px !important;">HLDB</code> stands for “highlight database”. Our <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntax</code> struct for the C
language contains the string <code style="font-size: 18px !important; line-height: 25.2px !important;">"c"</code> for the <code style="font-size: 18px !important; line-height: 25.2px !important;">filetype</code> field, the extensions
<code style="font-size: 18px !important; line-height: 25.2px !important;">".c"</code>, <code style="font-size: 18px !important; line-height: 25.2px !important;">".h"</code>, and <code style="font-size: 18px !important; line-height: 25.2px !important;">".cpp"</code> for the <code style="font-size: 18px !important; line-height: 25.2px !important;">filematch</code> field (the array must be
terminated with <code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code>), and the <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_HIGHLIGHT_NUMBERS</code> flag turned on in the
<code style="font-size: 18px !important; line-height: 25.2px !important;">flags</code> field.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">We then define an <code style="font-size: 18px !important; line-height: 25.2px !important;">HLDB_ENTRIES</code> constant to store the length of the <code style="font-size: 18px !important; line-height: 25.2px !important;">HLDB</code>
array.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now let’s add a pointer to the current <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntax</code> struct in our global
editor state, and initialize it to <code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code>.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/e-syntax/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 159</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/e-syntax" style="font-size: 12px !important; line-height: 25.2px !important;">e-syntax</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">typedef</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">cx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">cy</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rowoff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">dirty</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">statusmsg</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">80</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">time_t</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">statusmsg_time</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">termios</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">orig_termios</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">initEditor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">cx</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">cy</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rx</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rowoff</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">dirty</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">statusmsg</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\0'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">statusmsg_time</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">getWindowSize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">die</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">"getWindowSize"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">main</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">argc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">argv</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[])</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">When <code style="font-size: 18px !important; line-height: 25.2px !important;">E.syntax</code> is <code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code>, that means there is no filetype for the current
file, and no syntax highlighting should be done.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Let’s show the current filetype in the status bar. If <code style="font-size: 18px !important; line-height: 25.2px !important;">E.syntax</code> is <code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code>,
then we’ll display <code style="font-size: 18px !important; line-height: 25.2px !important;">no ft</code> (“no filetype”) instead.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/show-filetype/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 160</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/show-filetype" style="font-size: 12px !important; line-height: 25.2px !important;">show-filetype</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorScroll</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawRows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawStatusBar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[7m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">4</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">status</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">80</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rstatus</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">80</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">snprintf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">status</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">status</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">),</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"%.20s - %d lines %s"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"[No Name]"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">dirty</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"(modified)"</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">""</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rlen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">snprintf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rstatus</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rstatus</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">),</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"%s | %d/%d"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filetype</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"no ft"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">cy</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">status</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rstatus</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">" "</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\r\n</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawMessageBar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRefreshScreen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSetStatusMessage</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">const</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fmt</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">...)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">Now let’s change <code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code> to take the current <code style="font-size: 18px !important; line-height: 25.2px !important;">E.syntax</code> value
into account.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/use-filetype/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 161</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/use-filetype" style="font-size: 12px !important; line-height: 25.2px !important;">use-filetype</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">If no filetype is set, we <code style="font-size: 18px !important; line-height: 25.2px !important;">return</code> immediately after <code style="font-size: 18px !important; line-height: 25.2px !important;">memset()</code>ting the entire
line to <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_NORMAL</code>. We also wrap the number-highlighting code in an <code style="font-size: 18px !important; line-height: 25.2px !important;">if</code>
statement that checks to see if numbers should be highlighted for the current
filetype.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now we’ll create an <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSelectSyntaxHighlight()</code> function that tries to
match the current filename to one of the <code style="font-size: 18px !important; line-height: 25.2px !important;">filematch</code> fields in the <code style="font-size: 18px !important; line-height: 25.2px !important;">HLDB</code>. If
one matches, it’ll set <code style="font-size: 18px !important; line-height: 25.2px !important;">E.syntax</code> to that filetype.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/select-syntax/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 162</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/select-syntax" style="font-size: 12px !important; line-height: 25.2px !important;">select-syntax</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important;"></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ext</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strrchr</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important;"></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HLDB_ENTRIES</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">HLDB</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filematch</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">])</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_ext</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filematch</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">][</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_ext</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">ext</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strcmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ext</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filematch</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_ext</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strstr</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filematch</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">])))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 18px !important; line-height: 25.2px !important;">strrchr()</code> and <code style="font-size: 18px !important; line-height: 25.2px !important;">strcmp()</code> come from <code style="font-size: 18px !important; line-height: 25.2px !important;">&lt;string.h&gt;</code>. <code style="font-size: 18px !important; line-height: 25.2px !important;">strrchr()</code> returns a
pointer to the last occurrence of a character in a string, and <code style="font-size: 18px !important; line-height: 25.2px !important;">strcmp()</code>
returns <code style="font-size: 18px !important; line-height: 25.2px !important;">0</code> if two given strings are equal.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">First we set <code style="font-size: 18px !important; line-height: 25.2px !important;">E.syntax</code> to <code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code>, so that if nothing matches or if there is no
filename, then there is no filetype.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Then we get a pointer to the extension part of the filename by using
<code style="font-size: 18px !important; line-height: 25.2px !important;">strrchr()</code> to find the last occurrence of the <code style="font-size: 18px !important; line-height: 25.2px !important;">.</code> character. If there is no
extension, then <code style="font-size: 18px !important; line-height: 25.2px !important;">ext</code> will be <code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code>.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Finally, we loop through each <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntax</code> struct in the <code style="font-size: 18px !important; line-height: 25.2px !important;">HLDB</code> array, and
for each one of those, we loop through each pattern in its <code style="font-size: 18px !important; line-height: 25.2px !important;">filematch</code> array.
If the pattern starts with a <code style="font-size: 18px !important; line-height: 25.2px !important;">.</code>, then it’s a file extension pattern, and we
use <code style="font-size: 18px !important; line-height: 25.2px !important;">strcmp()</code> to see if the filename ends with that extension. If it’s not a
file extension pattern, then we just check to see if the pattern exists
anywhere in the filename, using <code style="font-size: 18px !important; line-height: 25.2px !important;">strstr()</code>. If the filename matched according
to those rules, then we set <code style="font-size: 18px !important; line-height: 25.2px !important;">E.syntax</code> to the current <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntax</code> struct,
and <code style="font-size: 18px !important; line-height: 25.2px !important;">return</code>.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">We want to call <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSelectSyntaxHighlight()</code> wherever <code style="font-size: 18px !important; line-height: 25.2px !important;">E.filename</code> changes.
This is in <code style="font-size: 18px !important; line-height: 25.2px !important;">editorOpen()</code> and <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSave()</code>.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/detect-filetype/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 163</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/detect-filetype" style="font-size: 12px !important; line-height: 25.2px !important;">detect-filetype</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowsToString</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buflen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorOpen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">free</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strdup</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">();</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">FILE</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fp</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">fopen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"r"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">die</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">"fopen"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">line</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">size_t</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">linecap</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">ssize_t</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">linelen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">linelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">getline</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">line</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">linecap</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">fp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">linelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">line</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">linelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\n'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">                           <span class="n" style="font-size: 14px !important; line-height: 20px !important;">line</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">linelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\r'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">linelen</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorInsertRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">line</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">linelen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">free</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">line</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">fclose</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">dirty</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSave</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorPrompt</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">"Save as: %s (ESC to cancel)"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSetStatusMessage</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">"Save aborted"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">();</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorRowsToString</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">fd</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">open</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">O_RDWR</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">|</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">O_CREAT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mo" style="font-size: 14px !important; line-height: 20px !important;">0644</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fd</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ftruncate</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fd</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">write</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fd</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">close</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fd</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">free</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">dirty</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSetStatusMessage</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">"%d bytes written to disk"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">close</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fd</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">free</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSetStatusMessage</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">"Can't save! I/O error: %s"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strerror</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">errno</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">));</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">At this point, when you open a C file in the editor, you should see numbers
getting highlighted, and you should see <code style="font-size: 18px !important; line-height: 25.2px !important;">c</code> in the status bar where we display
the filetype. When you start up the editor with no arguments and save the file
with a filename that ends in <code style="font-size: 18px !important; line-height: 25.2px !important;">.c</code>, you should see the filetype in the status
bar change satisfyingly from <code style="font-size: 18px !important; line-height: 25.2px !important;">no ft</code> to <code style="font-size: 18px !important; line-height: 25.2px !important;">c</code>. However, any numbers you might
have in the file will not be highlighted! Very unsatisfying!</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Let’s rehighlight the entire file after setting <code style="font-size: 18px !important; line-height: 25.2px !important;">E.syntax</code> in
<code style="font-size: 18px !important; line-height: 25.2px !important;">editorSelectSyntaxHighlight()</code>.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/rehighlight/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 164</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/rehighlight" style="font-size: 12px !important; line-height: 25.2px !important;">rehighlight</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ext</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strrchr</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HLDB_ENTRIES</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">HLDB</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filematch</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">])</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_ext</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filematch</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">][</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_ext</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">ext</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strcmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ext</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filematch</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_ext</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strstr</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filename</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filematch</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">])))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">We simply loop through each row in the file, and call <code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code> on
it. Now the highlighting immediately changes when the filetype changes.</p>
<h2 id="colorful-strings" style="font-size: 26px !important; line-height: 26px !important;"><a href="#colorful-strings" style="font-size: 26px !important; line-height: 26px !important;">Colorful strings</a></h2>

<p style="font-size: 18px !important; line-height: 25.2px !important;">With all that out of the way, we can finally get to highlighting more things!
Let’s start with strings.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/hl-string/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 165</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/hl-string" style="font-size: 12px !important; line-height: 25.2px !important;">hl-string</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_VERSION "0.0.1"</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_TAB_STOP 8</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_QUIT_TIMES 3</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define CTRL_KEY(k) ((k) &amp; 0x1f)</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorKey</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorHighlight</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MATCH</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HL_HIGHLIGHT_NUMBERS (1&lt;&lt;0)</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">switch</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">35</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">31</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MATCH</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">34</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="nl" style="font-size: 14px !important; line-height: 20px !important;">default:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">37</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">We’re coloring strings magenta (<code style="font-size: 18px !important; line-height: 25.2px !important;">35</code>).</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now let’s add an <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_HIGHLIGHT_STRINGS</code> bit flag to the <code style="font-size: 18px !important; line-height: 25.2px !important;">flags</code> field of the
<code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntax</code> struct, and turn on the flag when highlighting C files.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/string-flag/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 166</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/string-flag" style="font-size: 12px !important; line-height: 25.2px !important;">string-flag</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_VERSION "0.0.1"</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_TAB_STOP 8</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_QUIT_TIMES 3</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define CTRL_KEY(k) ((k) &amp; 0x1f)</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorKey</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorHighlight</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HL_HIGHLIGHT_NUMBERS (1&lt;&lt;0)</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HL_HIGHLIGHT_STRINGS (1&lt;&lt;1)</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_extensions</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".c"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".h"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".cpp"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HLDB</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"c"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_extensions</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">|</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_STRINGS</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">},</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HLDB_ENTRIES (sizeof(HLDB) / sizeof(HLDB[0]))</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">Now for the actual highlighting code. We will use an <code style="font-size: 18px !important; line-height: 25.2px !important;">in_string</code> variable to
keep track of whether we are currently inside a string. If we are, then we’ll
keep highlighting the current character as a string until we hit the closing
quote.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/syntax-strings/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 167</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/syntax-strings" style="font-size: 12px !important; line-height: 25.2px !important;">syntax-strings</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_STRINGS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'"'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\''</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">As you can see, we highlight both double-quoted strings and single-quoted
strings (sorry Lispers/Rustaceans). We actually store either a double-quote
(<code style="font-size: 18px !important; line-height: 25.2px !important;">"</code>) or a single-quote (<code style="font-size: 18px !important; line-height: 25.2px !important;">'</code>) character as the value of <code style="font-size: 18px !important; line-height: 25.2px !important;">in_string</code>, so that we
know which one closes the string.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">So, going through the code from top to bottom: If <code style="font-size: 18px !important; line-height: 25.2px !important;">in_string</code> is set, then we
know the current character can be highlighted with <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_STRING</code>. Then we check
if the current character is the closing quote (<code style="font-size: 18px !important; line-height: 25.2px !important;">c == in_string</code>), and if so, we
reset <code style="font-size: 18px !important; line-height: 25.2px !important;">in_string</code> to <code style="font-size: 18px !important; line-height: 25.2px !important;">0</code>. Then, since we highlighted the current character, we
have to consume it by incrementing <code style="font-size: 18px !important; line-height: 25.2px !important;">i</code> and <code style="font-size: 18px !important; line-height: 25.2px !important;">continue</code>ing out of the current
loop iteration. We also set <code style="font-size: 18px !important; line-height: 25.2px !important;">prev_sep</code> to <code style="font-size: 18px !important; line-height: 25.2px !important;">1</code> so that if we’re done
highlighting the string, the closing quote is considered a separator.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">If we’re not currently in a string, then we have to check if we’re at the
beginning of one by checking for a double- or single-quote. If we are, we store
the quote in <code style="font-size: 18px !important; line-height: 25.2px !important;">in_string</code>, highlight it with <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_STRING</code>, and consume it.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">We should probably take escaped quotes into account when highlighting strings.
If the sequence <code style="font-size: 18px !important; line-height: 25.2px !important;">\'</code> or <code style="font-size: 18px !important; line-height: 25.2px !important;">\"</code> occurs in a string, then the escaped quote doesn’t
close the string in the vast majority of languages.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/string-escapes/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 168</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/string-escapes" style="font-size: 12px !important; line-height: 25.2px !important;">string-escapes</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_STRINGS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\\'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'"'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\''</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">If we’re in a string and the current character is a backslash (<code style="font-size: 18px !important; line-height: 25.2px !important;">\</code>), <em style="font-size: 18px !important; line-height: 25.2px !important;">and</em>
there’s at least one more character in that line that comes after the
backslash, then we highlight the character that comes after the backslash with
<code style="font-size: 18px !important; line-height: 25.2px !important;">HL_STRING</code> and consume it. We increment <code style="font-size: 18px !important; line-height: 25.2px !important;">i</code> by <code style="font-size: 18px !important; line-height: 25.2px !important;">2</code> to consume both characters
at once.</p>
<h2 id="colorful-single-line-comments" style="font-size: 26px !important; line-height: 26px !important;"><a href="#colorful-single-line-comments" style="font-size: 26px !important; line-height: 26px !important;">Colorful single-line comments</a></h2>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Next let’s highlight single-line comments. (We’ll leave multi-line comments
until the end, because they’re complicated.)</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/hl-comment/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 169</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/hl-comment" style="font-size: 12px !important; line-height: 25.2px !important;">hl-comment</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_VERSION "0.0.1"</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_TAB_STOP 8</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_QUIT_TIMES 3</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define CTRL_KEY(k) ((k) &amp; 0x1f)</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorKey</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorHighlight</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_COMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MATCH</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HL_HIGHLIGHT_NUMBERS (1&lt;&lt;0)</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HL_HIGHLIGHT_STRINGS (1&lt;&lt;1)</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">switch</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_COMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">36</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">35</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">31</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MATCH</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">34</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="nl" style="font-size: 14px !important; line-height: 20px !important;">default:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">37</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">Comments will be highlighted in cyan (<code style="font-size: 18px !important; line-height: 25.2px !important;">36</code>).</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">We’ll let each language specify its own single-line comment pattern, as they
differ a lot between languages. Let’s add a <code style="font-size: 18px !important; line-height: 25.2px !important;">singleline_comment_start</code> string
to the <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntax</code> struct, and set it to <code style="font-size: 18px !important; line-height: 25.2px !important;">"//"</code> for the C filetype.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/scs/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 170</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/scs" style="font-size: 12px !important; line-height: 25.2px !important;">scs</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filetype</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">**</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filematch</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">singleline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">typedef</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_extensions</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".c"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".h"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".cpp"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HLDB</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"c"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_extensions</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"//"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">|</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_STRINGS</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">},</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HLDB_ENTRIES (sizeof(HLDB) / sizeof(HLDB[0]))</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">Okay, now for the highlighting code.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/syntax-comments/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 171</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/syntax-comments" style="font-size: 12px !important; line-height: 25.2px !important;">syntax-comments</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">singleline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_COMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_STRINGS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\\'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'"'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\''</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 18px !important; line-height: 25.2px !important;">strncmp()</code> comes from <code style="font-size: 18px !important; line-height: 25.2px !important;">&lt;string.h&gt;</code>.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">If you don’t want single-line comment highlighting for a particular filetype,
you should be able to set <code style="font-size: 18px !important; line-height: 25.2px !important;">singleline_comment_start</code> either to <code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code> or to the
empty string (<code style="font-size: 18px !important; line-height: 25.2px !important;">""</code>). We make <code style="font-size: 18px !important; line-height: 25.2px !important;">scs</code> an alias for
<code style="font-size: 18px !important; line-height: 25.2px !important;">E.syntax-&gt;singleline_comment_start</code> for easier typing (and readability,
perhaps?). We then set <code style="font-size: 18px !important; line-height: 25.2px !important;">scs_len</code> to the length of the string, or <code style="font-size: 18px !important; line-height: 25.2px !important;">0</code> if the
string is <code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code>. This lets us use <code style="font-size: 18px !important; line-height: 25.2px !important;">scs_len</code> as a boolean to know whether we
should highlight single-line comments.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">So we wrap our comment highlighting code in an <code style="font-size: 18px !important; line-height: 25.2px !important;">if</code> statement that checks
<code style="font-size: 18px !important; line-height: 25.2px !important;">scs_len</code> and also makes sure we’re not in a string, since we’re placing this
code above the string highlighting code (order matters a lot in this
function).</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">If those checks passed, then we use <code style="font-size: 18px !important; line-height: 25.2px !important;">strncmp()</code> to check if this character is
the start of a single-line comment. If so, then we simply <code style="font-size: 18px !important; line-height: 25.2px !important;">memset()</code> the whole
rest of the line with <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_COMMENT</code> and <code style="font-size: 18px !important; line-height: 25.2px !important;">break</code> out of the syntax highlighting
loop. Just like that, we’re done highlighting the line.</p>
<h2 id="colorful-keywords" style="font-size: 26px !important; line-height: 26px !important;"><a href="#colorful-keywords" style="font-size: 26px !important; line-height: 26px !important;">Colorful keywords</a></h2>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now let’s turn to highlighting keywords. We’re going to allow languages to
specify two types of keywords that will be highlighted in different colors. (In
C, we’ll highlight actual keywords in one color and common type names in the
other color.)</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/hl-keywords/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 172</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/hl-keywords" style="font-size: 12px !important; line-height: 25.2px !important;">hl-keywords</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_VERSION "0.0.1"</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_TAB_STOP 8</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_QUIT_TIMES 3</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define CTRL_KEY(k) ((k) &amp; 0x1f)</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorKey</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorHighlight</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_COMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MATCH</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HL_HIGHLIGHT_NUMBERS (1&lt;&lt;0)</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HL_HIGHLIGHT_STRINGS (1&lt;&lt;1)</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">switch</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_COMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">36</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">33</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">32</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">35</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">31</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MATCH</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">34</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="nl" style="font-size: 14px !important; line-height: 20px !important;">default:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">37</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">The two colors we’ll use for keywords are yellow (<code style="font-size: 18px !important; line-height: 25.2px !important;">33</code>) and green (<code style="font-size: 18px !important; line-height: 25.2px !important;">32</code>).</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Let’s add a <code style="font-size: 18px !important; line-height: 25.2px !important;">keywords</code> array to the <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntax</code> struct. This will be a
<code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code>-terminated array of strings, each string containing a keyword. To
differentiate between the two types of keywords, we’ll terminate the second
type of keywords with a pipe (<code style="font-size: 18px !important; line-height: 25.2px !important;">|</code>) character (also known as a vertical bar).</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/c-keywords/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 173</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/c-keywords" style="font-size: 12px !important; line-height: 25.2px !important;">c-keywords</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filetype</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">**</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filematch</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">**</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">singleline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">typedef</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_extensions</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".c"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".h"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".cpp"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"switch"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"if"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"while"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"for"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"break"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"continue"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"return"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"else"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"struct"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"union"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"typedef"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"static"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"enum"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"class"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"case"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><ins class="line" style="font-size: 14px !important;"></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"int|"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"long|"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"double|"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"float|"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"char|"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"unsigned|"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"signed|"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"void|"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HLDB</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"c"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_extensions</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"//"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">|</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_STRINGS</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">},</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HLDB_ENTRIES (sizeof(HLDB) / sizeof(HLDB[0]))</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">As mentioned earlier, we’ll highlight common C types as secondary keywords, so
we end each one with a <code style="font-size: 18px !important; line-height: 25.2px !important;">|</code> character.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now let’s highlight them.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/syntax-keywords/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 174</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/syntax-keywords" style="font-size: 12px !important; line-height: 25.2px !important;">syntax-keywords</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">**</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">singleline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_COMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_STRINGS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\\'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'"'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\''</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">][</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'|'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important;"></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">First, at the top of the function we make <code style="font-size: 18px !important; line-height: 25.2px !important;">keywords</code> an alias for
<code style="font-size: 18px !important; line-height: 25.2px !important;">E.syntax-&gt;keywords</code> since we’ll be using it a lot, and in some pretty dense
code.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Keywords require a separator both before and after the keyword. Otherwise, the
<code style="font-size: 18px !important; line-height: 25.2px !important;">void</code> in <code style="font-size: 18px !important; line-height: 25.2px !important;">avoid</code>, <code style="font-size: 18px !important; line-height: 25.2px !important;">voided</code>, or <code style="font-size: 18px !important; line-height: 25.2px !important;">avoidable</code> would be highlighted as a keyword,
which is definitely a problem we want to, uh, circumnavigate.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">So we check <code style="font-size: 18px !important; line-height: 25.2px !important;">prev_sep</code> to make sure a separator came before the keyword, before
looping through each possible keyword. For each keyword, we store the length in
<code style="font-size: 18px !important; line-height: 25.2px !important;">klen</code> and whether it’s a secondary keyword in <code style="font-size: 18px !important; line-height: 25.2px !important;">kw2</code>, in which case we
decrement <code style="font-size: 18px !important; line-height: 25.2px !important;">klen</code> to account for the extraneous <code style="font-size: 18px !important; line-height: 25.2px !important;">|</code> character.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">We then use <code style="font-size: 18px !important; line-height: 25.2px !important;">strncmp()</code> to check if the keyword exists at our current position
in the text, <em style="font-size: 18px !important; line-height: 25.2px !important;">and</em> we check to see if a separator character comes after the
keyword. Since <code style="font-size: 18px !important; line-height: 25.2px !important;">\0</code> is considered a separator character, this works if the
keyword is at the very end of the line.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">If all that passed, then we have a keyword to highlight. We use <code style="font-size: 18px !important; line-height: 25.2px !important;">memset()</code> to
highlight the whole keyword at once, highlighting it with <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_KEYWORD1</code> or
<code style="font-size: 18px !important; line-height: 25.2px !important;">HL_KEYWORD2</code> depending on the value of <code style="font-size: 18px !important; line-height: 25.2px !important;">kw2</code>. We then consume the entire
keyword by incrementing <code style="font-size: 18px !important; line-height: 25.2px !important;">i</code> by the length of the keyword. Then we <code style="font-size: 18px !important; line-height: 25.2px !important;">break</code>
instead of <code style="font-size: 18px !important; line-height: 25.2px !important;">continue</code>ing, because we are in an inner loop, so we have to break
out of that loop before <code style="font-size: 18px !important; line-height: 25.2px !important;">continue</code>ing the outer loop. That is why, after the
<code style="font-size: 18px !important; line-height: 25.2px !important;">for</code> loop, we check if the loop was broken out of by seeing if it got to the
terminating <code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code> value, and if it was broken out of, we <code style="font-size: 18px !important; line-height: 25.2px !important;">continue</code>.</p>
<h2 id="nonprintable-characters" style="font-size: 26px !important; line-height: 26px !important;"><a href="#nonprintable-characters" style="font-size: 26px !important; line-height: 26px !important;">Nonprintable characters</a></h2>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Before we tackle highlighting multi-line comments, let’s take a quick break
from <code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code>.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">We’re going to display nonprintable characters in a more user-friendly way.
Currently, nonprintable characters completely mess up the rendering that our
editor does. Just try running <code style="font-size: 18px !important; line-height: 25.2px !important;">kilo</code> and passing itself in as an argument. That
is, open the <code style="font-size: 18px !important; line-height: 25.2px !important;">kilo</code> executable file using <code style="font-size: 18px !important; line-height: 25.2px !important;">kilo</code>. And try moving the cursor
around, and typing. It’s not pretty. Every keypress causes the terminal to
ding, because the audible bell character (<code style="font-size: 18px !important; line-height: 25.2px !important;">7</code>) is being printed out. Strings
containing terminal escape sequences in our code are being printed out as
actual escape sequences, because that’s how they’re stored in a raw executable.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">To prevent all that, we’re going to translate nonprintable characters into
printable ones. We’ll render the alphabetic control characters
(<kbd style="font-size: 14px !important; line-height: 25.2px !important;">Ctrl-A</kbd> = <code style="font-size: 18px !important; line-height: 25.2px !important;">1</code>, <kbd style="font-size: 14px !important; line-height: 25.2px !important;">Ctrl-B</kbd> = <code style="font-size: 18px !important; line-height: 25.2px !important;">2</code>, …, <kbd style="font-size: 14px !important; line-height: 25.2px !important;">Ctrl-Z</kbd> =
<code style="font-size: 18px !important; line-height: 25.2px !important;">26</code>) as the capital letters <code style="font-size: 18px !important; line-height: 25.2px !important;">A</code> through <code style="font-size: 18px !important; line-height: 25.2px !important;">Z</code>. We’ll also render the <code style="font-size: 18px !important; line-height: 25.2px !important;">0</code> byte
like a control character. <kbd style="font-size: 14px !important; line-height: 25.2px !important;">Ctrl-@</kbd> = <code style="font-size: 18px !important; line-height: 25.2px !important;">0</code>, so we’ll render it as an <code style="font-size: 18px !important; line-height: 25.2px !important;">@</code>
sign. Finally, any other nonprintable characters we’ll render as a question
mark (<code style="font-size: 18px !important; line-height: 25.2px !important;">?</code>). And to differentiate these characters from their printable
counterparts, we’ll render them using inverted colors (black on white).</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/nonprintables/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 175</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/nonprintables" style="font-size: 12px !important; line-height: 25.2px !important;">nonprintables</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorScroll</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawRows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rowoff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">/</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">80</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">snprintf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">),</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"Kilo editor -- version %s"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">KILO_VERSION</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">/</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"~"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">" "</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"~"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">iscntrl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">sym</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">26</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'@'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'?'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[7m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">4</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">sym</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[39m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">5</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">16</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">clen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">snprintf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">),</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[%dm"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">clen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[39m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">5</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[K"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\r\n</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorDrawStatusBar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorDrawMessageBar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorRefreshScreen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSetStatusMessage</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">const</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fmt</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">...)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">We use <code style="font-size: 18px !important; line-height: 25.2px !important;">iscntrl()</code> to check if the current character is a control character. If
so, we translate it into a printable character by adding its value to <code style="font-size: 18px !important; line-height: 25.2px !important;">'@'</code> (in
ASCII, the capital letters of the alphabet come after the <code style="font-size: 18px !important; line-height: 25.2px !important;">@</code> character), or
using the <code style="font-size: 18px !important; line-height: 25.2px !important;">'?'</code> character if it’s not in the alphabetic range.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">We then use the <code style="font-size: 18px !important; line-height: 25.2px !important;">&lt;esc&gt;[7m</code> escape sequence to switch to inverted colors before
printing the translated symbol. We use <code style="font-size: 18px !important; line-height: 25.2px !important;">&lt;esc&gt;[m</code> to turn off inverted colors
again.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Unfortunately, <code style="font-size: 18px !important; line-height: 25.2px !important;">&lt;esc&gt;[m</code> turns off <em style="font-size: 18px !important; line-height: 25.2px !important;">all</em> text formatting, including colors. So
let’s print the escape sequence for the current color afterwards.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/nonprintables-fix-color/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 176</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/nonprintables-fix-color" style="font-size: 12px !important; line-height: 25.2px !important;">nonprintables-fix-color</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorScroll</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawRows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rowoff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">y</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screenrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">/</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">80</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">snprintf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">),</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"Kilo editor -- version %s"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">KILO_VERSION</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">/</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"~"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">padding</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">" "</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcome</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">welcomelen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"~"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">screencols</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filerow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">coloff</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">iscntrl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">sym</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">26</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'@'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'?'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[7m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">4</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">sym</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">16</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">clen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">snprintf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">),</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[%dm"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">clen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[39m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">5</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">current_color</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="mi" style="font-size: 14px !important; line-height: 20px !important;">16</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">clen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">snprintf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">),</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[%dm"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">color</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">buf</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">clen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[39m"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">5</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\x1b</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">[K"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">3</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abAppend</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="se" style="font-size: 14px !important; line-height: 20px !important;">\r\n</span><span class="s" style="font-size: 14px !important; line-height: 20px !important;">"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawStatusBar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDrawMessageBar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">abuf</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">ab</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRefreshScreen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSetStatusMessage</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="k" style="font-size: 14px !important; line-height: 20px !important;">const</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">fmt</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">...)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">You can test the coloring of nonprintables by pressing <kbd style="font-size: 14px !important; line-height: 25.2px !important;">Ctrl-A</kbd>,
<kbd style="font-size: 14px !important; line-height: 25.2px !important;">Ctrl-B</kbd>, and so on to insert those control characters into strings or
comments, and you should see that they get the same color as the surrounding
characters, just inverted.</p>
<h2 id="colorful-multiline-comments" style="font-size: 26px !important; line-height: 26px !important;"><a href="#colorful-multiline-comments" style="font-size: 26px !important; line-height: 26px !important;">Colorful multiline comments</a></h2>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Okay, we have one last feature to implement: multi-line comment highlighting.
Let’s start by adding <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_MLCOMMENT</code> to the <code style="font-size: 18px !important; line-height: 25.2px !important;">editorHighlight</code> enum.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/hl-multiline-comments/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 177</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/hl-multiline-comments" style="font-size: 12px !important; line-height: 25.2px !important;">hl-multiline-comments</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_VERSION "0.0.1"</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_TAB_STOP 8</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define KILO_QUIT_TIMES 3</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define CTRL_KEY(k) ((k) &amp; 0x1f)</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorKey</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">enum</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorHighlight</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_COMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MLCOMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MATCH</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HL_HIGHLIGHT_NUMBERS (1&lt;&lt;0)</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HL_HIGHLIGHT_STRINGS (1&lt;&lt;1)</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">switch</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_COMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MLCOMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">36</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">33</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">32</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">35</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">31</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">case</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MATCH</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">34</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="nl" style="font-size: 14px !important; line-height: 20px !important;">default:</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">37</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">We’ll highlight multi-line comments to be the same color as single-line
comments (cyan).</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now we’ll add two strings to <code style="font-size: 18px !important; line-height: 25.2px !important;">editorSyntax</code>: <code style="font-size: 18px !important; line-height: 25.2px !important;">multiline_comment_start</code> and
<code style="font-size: 18px !important; line-height: 25.2px !important;">multiline_comment_end</code>. In C, these will be <code style="font-size: 18px !important; line-height: 25.2px !important;">"/*"</code> and <code style="font-size: 18px !important; line-height: 25.2px !important;">"*/"</code>.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/mcs-mce/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 178</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/mcs-mce" style="font-size: 12px !important; line-height: 25.2px !important;">mcs-mce</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filetype</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">**</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">filematch</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">**</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">singleline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">multiline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">multiline_comment_end</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">typedef</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_extensions</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".c"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".h"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">".cpp"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HLDB</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"c"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_extensions</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">C_HL_keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"//"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"/*"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="s" style="font-size: 14px !important; line-height: 20px !important;">"*/"</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">|</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_STRINGS</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">},</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cp" style="font-size: 14px !important; line-height: 20px !important;">#define HLDB_ENTRIES (sizeof(HLDB) / sizeof(HLDB[0]))</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">Now let’s open <code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code> up once again. We’ll add <code style="font-size: 18px !important; line-height: 25.2px !important;">mcs</code> and <code style="font-size: 18px !important; line-height: 25.2px !important;">mce</code>
aliases that are analogous to the <code style="font-size: 18px !important; line-height: 25.2px !important;">scs</code> alias we already have for single-line
comments. We’ll also add <code style="font-size: 18px !important; line-height: 25.2px !important;">mcs_len</code> and <code style="font-size: 18px !important; line-height: 25.2px !important;">mce_len</code>.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/mcs-mce-len/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 179</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/mcs-mce-len" style="font-size: 12px !important; line-height: 25.2px !important;">mcs-mce-len</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">**</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">singleline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">multiline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">multiline_comment_end</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_COMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_STRINGS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\\'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'"'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\''</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">][</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'|'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">Now for the highlighting code. We won’t worry about multiple lines just yet.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/syntax-mlcomment/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 180</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/syntax-mlcomment" style="font-size: 12px !important; line-height: 25.2px !important;">syntax-mlcomment</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">**</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">singleline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">multiline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">multiline_comment_end</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_COMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MLCOMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MLCOMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MLCOMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_STRINGS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\\'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'"'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\''</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">][</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'|'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">First we add an <code style="font-size: 18px !important; line-height: 25.2px !important;">in_comment</code> boolean variable to keep track of whether we’re
currently inside a multi-line comment (this variable isn’t used for single-line
comments).</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Moving down into the <code style="font-size: 18px !important; line-height: 25.2px !important;">while</code> loop, we require both <code style="font-size: 18px !important; line-height: 25.2px !important;">mcs</code> and <code style="font-size: 18px !important; line-height: 25.2px !important;">mce</code> to be
non-<code style="font-size: 18px !important; line-height: 25.2px !important;">NULL</code> strings of length greater than <code style="font-size: 18px !important; line-height: 25.2px !important;">0</code> in order to turn on multi-line
comment highlighting. We also check to make sure we’re not in a string, because
having <code style="font-size: 18px !important; line-height: 25.2px !important;">/*</code> inside a string doesn’t start a comment in most languages. Okay,
I’ll say it: <em style="font-size: 18px !important; line-height: 25.2px !important;">all</em> languages.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">If we’re currently in a multi-line comment, then we can safely highlight the
current character with <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_MLCOMMENT</code>. Then we check if we’re at the end of a
multi-line comment by using <code style="font-size: 18px !important; line-height: 25.2px !important;">strncmp()</code> with <code style="font-size: 18px !important; line-height: 25.2px !important;">mce</code>. If so, we use <code style="font-size: 18px !important; line-height: 25.2px !important;">memset()</code> to
highlight the whole <code style="font-size: 18px !important; line-height: 25.2px !important;">mce</code> string with <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_MLCOMMENT</code>, and then we consume it.
If we’re not at the end of the comment, we simply consume the current character
which we already highlighted.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">If we’re not currently in a multi-line comment, then we use <code style="font-size: 18px !important; line-height: 25.2px !important;">strncmp()</code> with
<code style="font-size: 18px !important; line-height: 25.2px !important;">mcs</code> to check if we’re at the beginning of a multi-line comment. If so, we use
<code style="font-size: 18px !important; line-height: 25.2px !important;">memset()</code> to highlight the whole <code style="font-size: 18px !important; line-height: 25.2px !important;">mcs</code> string with <code style="font-size: 18px !important; line-height: 25.2px !important;">HL_MLCOMMENT</code>, set
<code style="font-size: 18px !important; line-height: 25.2px !important;">in_comment</code> to true, and consume the whole <code style="font-size: 18px !important; line-height: 25.2px !important;">mcs</code> string.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now let’s fix a bit of a complication that multi-line comments add:
single-line comments should not be recognized inside multi-line comments.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/slcomment-within-mlcomment/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 181</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/slcomment-within-mlcomment" style="font-size: 12px !important; line-height: 25.2px !important;">slcomment-within-mlcomment</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">**</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">singleline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">multiline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">multiline_comment_end</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_COMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MLCOMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MLCOMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MLCOMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_STRINGS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\\'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'"'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\''</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">][</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'|'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">Okay, now let’s work on highlighting multi-line comments that actually span
over multiple lines. To do this, we need to know if the previous line is part
of an unclosed multi-line comment. Let’s add an <code style="font-size: 18px !important; line-height: 25.2px !important;">hl_open_comment</code> boolean
variable to the <code style="font-size: 18px !important; line-height: 25.2px !important;">erow</code> struct. Let’s also add an <code style="font-size: 18px !important; line-height: 25.2px !important;">idx</code> integer variable, so
that each <code style="font-size: 18px !important; line-height: 25.2px !important;">erow</code> knows its own index within the file. That will allow each row
to examine the previous row’s <code style="font-size: 18px !important; line-height: 25.2px !important;">hl_open_comment</code> value.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/idx-and-hloc/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 182</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/idx-and-hloc" style="font-size: 12px !important; line-height: 25.2px !important;">idx-and-hloc</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorSyntax</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">typedef</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">size</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl_open_comment</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">};</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="k" style="font-size: 14px !important; line-height: 20px !important;">struct</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorConfig</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowCxToRx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">cx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowRxToCx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorInsertRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">size_t</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">));</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memmove</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">));</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">size</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">malloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memcpy</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\0'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl_open_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">dirty</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorFreeRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDelRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowInsertChar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowAppendString</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">size_t</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowDelChar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">We initialize <code style="font-size: 18px !important; line-height: 25.2px !important;">idx</code> to the row’s index in the file at the time it is inserted.
Let’s make sure to update the <code style="font-size: 18px !important; line-height: 25.2px !important;">idx</code> of each row whenever a row is inserted into
or removed from the file.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/update-idx/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 183</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/update-idx" style="font-size: 12px !important; line-height: 25.2px !important;">update-idx</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowCxToRx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">cx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowRxToCx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">rx</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorInsertRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">size_t</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">));</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memmove</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">));</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">size</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">malloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memcpy</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">chars</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\0'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl_open_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">dirty</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorFreeRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorDelRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorFreeRow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memmove</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">sizeof</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">));</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">dirty</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowInsertChar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowAppendString</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">s</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">size_t</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorRowDelChar</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">at</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c1" style="font-size: 12px !important; line-height: 16px !important;">♎︎ compiles, but with no observable effects</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">The <code style="font-size: 18px !important; line-height: 25.2px !important;">for</code> loops update the index of each row that was displaced by the insert
or delete operation.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Now, the final step.</p>

<div class="diff" style="font-size: 18px !important; line-height: 25.2px !important;">
<div class="diff-header" style="font-size: 16px !important; line-height: 25.2px !important;">
  <div class="step-filename" style="font-size: 16px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/blob/propagate-highlight/kilo.c" style="font-size: 16px !important; line-height: 25.2px !important;">kilo.c</a></div>
  <div class="step-number" style="font-size: 16px !important; line-height: 25.2px !important;">Step 184</div>
  <div class="step-name" style="font-size: 12px !important; line-height: 25.2px !important;"><a href="https://github.com/snaptoken/kilo-src/tree/propagate-highlight" style="font-size: 12px !important; line-height: 25.2px !important;">propagate-highlight</a></div>
</div><pre class="highlight" style="font-size: 18px !important; line-height: 25.2px !important;"><code style="font-size: 14px !important; line-height: 20px !important;"><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** includes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** defines ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** data ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** filetypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** prototypes ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** terminal ***/</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** syntax highlighting ***/</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">erow</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">realloc</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">return</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">**</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">singleline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">multiline_comment_start</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">*</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">multiline_comment_end</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">].</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl_open_comment</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">while</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">unsigned</span> <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">char</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&gt;</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NORMAL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">scs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_COMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MLCOMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MLCOMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mce_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_MLCOMMENT</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">mcs_len</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_STRINGS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\\'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">rsize</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span> <span class="k" style="font-size: 14px !important; line-height: 20px !important;">else</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'"'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'\''</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_string</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_STRING</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">syntax</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">flags</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_HIGHLIGHT_NUMBERS</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">((</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">isdigit</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">||</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'.'</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_hl</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_NUMBER</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">for</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">];</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">strlen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">][</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">-</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">==</span> <span class="sc" style="font-size: 14px !important; line-height: 20px !important;">'|'</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">--</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">!</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">strncmp</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">            <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">render</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]))</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">memset</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">],</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">kw2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">?</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD2</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">:</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">HL_KEYWORD1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">,</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">klen</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">          <span class="k" style="font-size: 14px !important; line-height: 20px !important;">break</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">keywords</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">j</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="nb" style="font-size: 14px !important; line-height: 20px !important;">NULL</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">0</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">        <span class="k" style="font-size: 14px !important; line-height: 20px !important;">continue</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">      <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">prev_sep</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">is_separator</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">c</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">i</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">++</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></div><div class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">changed</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl_open_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">!=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">);</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl_open_comment</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">=</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">in_comment</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">;</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">  <span class="k" style="font-size: 14px !important; line-height: 20px !important;">if</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">changed</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;&amp;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">&lt;</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">numrows</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span></ins><ins class="line" style="font-size: 14px !important; line-height: 20px !important;">    <span class="n" style="font-size: 14px !important; line-height: 20px !important;">editorUpdateSyntax</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">&amp;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">E</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">.</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">[</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">row</span><span class="o" style="font-size: 14px !important; line-height: 20px !important;">-&gt;</span><span class="n" style="font-size: 14px !important; line-height: 20px !important;">idx</span> <span class="o" style="font-size: 14px !important; line-height: 20px !important;">+</span> <span class="mi" style="font-size: 14px !important; line-height: 20px !important;">1</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">]);</span></ins><div class="line" style="font-size: 14px !important; line-height: 20px !important;"><span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSyntaxToColor</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">(</span><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">int</span> <span class="n" style="font-size: 14px !important; line-height: 20px !important;">hl</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">)</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="kt" style="font-size: 14px !important; line-height: 20px !important;">void</span> <span class="nf" style="font-size: 14px !important; line-height: 20px !important;">editorSelectSyntaxHighlight</span><span class="p" style="font-size: 14px !important; line-height: 20px !important;">()</span> <span class="p" style="font-size: 14px !important; line-height: 20px !important;">{</span> … <span class="p" style="font-size: 14px !important; line-height: 20px !important;">}</span></div><div class="line" style="font-size: 14px !important;"></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** row operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** editor operations ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** file i/o ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** find ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** append buffer ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** output ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** input ***/</span></div><div class="line folded" style="font-size: 14px !important; line-height: 20px !important;"><span class="cm" style="font-size: 14px !important; line-height: 20px !important;">/*** init ***/</span></div></code></pre>
<div class="diff-footer" style="font-size: 18px !important; line-height: 25.2px !important;">
  <div class="diff-tag-c2" style="font-size: 12px !important; line-height: 16px !important;">♐︎ compiles</div>
</div>
</div>


<p style="font-size: 18px !important; line-height: 25.2px !important;">Near the top of <code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code>, we initialize <code style="font-size: 18px !important; line-height: 25.2px !important;">in_comment</code> to true if
the previous row has an unclosed multi-line comment. If that’s the case, then
the current row will start out being highlighted as a multi-line comment.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">At the bottom of <code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code>, we set the value of the current row’s
<code style="font-size: 18px !important; line-height: 25.2px !important;">hl_open_comment</code> to whatever state <code style="font-size: 18px !important; line-height: 25.2px !important;">in_comment</code> got left in after processing
the entire row. That tells us whether the row ended as an unclosed multi-line
comment or not.</p>

<p style="font-size: 18px !important; line-height: 25.2px !important;">Then we have to consider updating the syntax of the next lines in the file. So
far, we have only been updating the syntax of a line when the user changes that
specific line. But with multi-line comments, a user could comment out an entire
file just by changing one line. So it seems like we need to update the syntax
of all the lines following the current line. However, we know the highlighting
of the next line will not change if the value of this line’s <code style="font-size: 18px !important; line-height: 25.2px !important;">hl_open_comment</code>
did not change. So we check if it changed, and only call <code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code>
on the next line if <code style="font-size: 18px !important; line-height: 25.2px !important;">hl_open_comment</code> changed (and if there is a next line in
the file). Because <code style="font-size: 18px !important; line-height: 25.2px !important;">editorUpdateSyntax()</code> keeps calling itself with the next
line, the change will continue to propagate to more and more lines until one of
them is unchanged, at which point we know that all the lines after that one
must be unchanged as well.</p>
<h2 id="youre-done" style="font-size: 26px !important; line-height: 26px !important;"><a href="#youre-done" style="font-size: 26px !important; line-height: 26px !important;">You’re done</a></h2>

<p style="font-size: 18px !important; line-height: 25.2px !important;">That’s it! Our text editor is finished. In the
<a href="https://viewsourcecode.org/snaptoken/kilo/08.appendices.html" style="font-size: 18px !important; line-height: 25.2px !important;">appendices</a>, you’ll find some ideas for features you might
want to extend the editor with on your own.</p>

    </div>
    <div id="version" style="font-size: 12px !important; line-height: 25.2px !important;">
      <a href="https://github.com/snaptoken/kilo-tutorial/tree/v1.0.0beta11" style="font-size: 12px !important; line-height: 25.2px !important;">1.0.0beta11</a>
      (<a href="https://github.com/snaptoken/kilo-tutorial/blob/master/CHANGELOG.md" style="font-size: 12px !important; line-height: 25.2px !important;">changelog</a>)
    </div>
    <footer class="bar" style="font-size: 18px !important; line-height: 25.2px !important;">
      <nav style="font-size: 18px !important; line-height: 25.2px !important;">
        <a href="#" style="font-size: 18px !important; line-height: 25.2px !important;">top of page</a>
      </nav>
    </footer>
  


</body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>